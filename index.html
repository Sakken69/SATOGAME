<!DOCTYPE html>
<html lang="ja">
<head>
  <link rel="manifest" href="manifest.json">
<script src="./app.js">
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./sw.js")
      .then(reg => console.log("ServiceWorkerç™»éŒ²æˆåŠŸ:", reg.scope))
      .catch(err => console.log("ServiceWorkerç™»éŒ²å¤±æ•—:", err));
  }
</script>
  <meta charset="UTF-8">
  <title>ä¸¦ã³åˆ¤å®šã‚¹ãƒ†ãƒ¼ã‚¸</title>
  <style>
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 60px);
      gap: 10px;
      margin: 20px;
    }
    .tile {
      width: 60px;
      height: 60px;
      background-color: white;
      border: 2px solid #333;
      cursor: pointer;
      transition: background-color 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 20px;
    }
    .black {
      background-color: black;
      color: white;
    }
    #message {
      margin-top: 10px;
      font-size: 18px;
      color: green;
    }
  </style>
</head>
<body>
  <div id="grid" class="grid"></div>
  <div id="message"></div>

  <script>
  const stages = {
  easy: [1, 4, 7],        // ä¸­å¤®åˆ—ãŒé»’ãªã‚‰OK
  normal: [1,5,7,9,13],      
  hard: [2,5,9,10,12,13,14,15,16,17,21,25,28,29,30,31,33,35,38,41,44,45,46,47]  
};
createTiles()

let difficultyOrder = ["easy", "normal", "hard"];
let currentDifficultyIndex = 0;

function checkAnswer() {
  const tiles = document.querySelectorAll(".tile");
  const difficulty = difficultyOrder[currentDifficultyIndex];
  const correctIndexes = stages[difficulty];

  const isCorrect = correctIndexes.every(i =>
    tiles[i].classList.contains("black")
  );

  const isOthersWhite = Array.from(tiles).every((tile, i) =>
    correctIndexes.includes(i) ? true : !tile.classList.contains("black")
  );

  if (isCorrect && isOthersWhite) {
    message.textContent = `ğŸ‰ ${difficulty.toUpperCase()}ã‚¯ãƒªã‚¢ï¼`;

    setTimeout(() => {
      currentDifficultyIndex+=1;
      if (currentDifficultyIndex < difficultyOrder.length) {
        message.textContent = `â–¶ æ¬¡ã¯ ${difficultyOrder[currentDifficultyIndex].toUpperCase()} ã‚¹ãƒ†ãƒ¼ã‚¸ï¼`;
        setTimeout(() => {
          message.textContent = "";
          createTiles(); // ã‚¹ãƒ†ãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ
        }, 2000);
      } else {
        message.textContent = "ğŸ† å…¨ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ï¼ãŠã‚ï¼";
      }
    }, 1500);
  }
}

function createTiles() {
  grid.innerHTML = "";

  const { columns, rows } = getBoardSize();
  const totalTiles = columns * rows;
  const difficulty = difficultyOrder[currentDifficultyIndex];
  const numbers = stageNumbers[difficulty]; // ã‚¹ãƒ†ãƒ¼ã‚¸å°‚ç”¨æ•°å­—ã‚’å–å¾—

  grid.style.gridTemplateColumns = `repeat(${columns}, 60px)`;

  for (let i = 0; i < totalTiles; i++) {
    const tile = document.createElement("div");
    tile.className = "tile";
    tile.textContent = numbers[i]; // ã‚¹ãƒ†ãƒ¼ã‚¸ã«å¿œã˜ãŸæ•°å­—ã‚’è¡¨ç¤º
    tile.dataset.index = i;
    tile.addEventListener("click", () => {
      tile.classList.toggle("black");
      checkAnswer(); // åˆ¤å®šã¯ãã®ã¾ã¾
    });
    grid.appendChild(tile);
  }
  // ğŸ”Hardãƒ¢ãƒ¼ãƒ‰ãªã‚‰ãƒ’ãƒ³ãƒˆãƒœã‚¿ãƒ³è¿½åŠ 
  if (difficulty === "hard") {
    const hintButton = document.createElement("button");
    hintButton.textContent = "HintğŸ’¡";
    hintButton.style.marginTop = "15px";
    hintButton.addEventListener("click", showHint);
    message.appendChild(hintButton);
  }

}

function getBoardSize() {
  const difficulty = difficultyOrder[currentDifficultyIndex];
  if (difficulty === "easy"){ return { columns: 3, rows: 3 }};     // 3Ã—3
  if (difficulty === "normal"){ return { columns: 5, rows: 3 }};   // 5Ã—3 â†ã‚³ã‚³ï¼
  if (difficulty === "hard"){ return { columns: 8, rows: 6 }};     // 5Ã—5ãªã©
}

const easpos = [2,1,2,3,2,3,2,1,2];
const norpos = [2,2,2,2,1,1,3,2,3,1,1,2,2,2,2];
const hadpos = [1,3,2,3,3,3,4,2,3,4,3,3,3,4,4,1,3,4,4,3,5,6,7,4,4,3,4,2,3,4,4,2,3,2,4,2,5,7,6,5,2,1,3,2,2,3,3,2];

const stageNumbers = {
  easy: Array.from(easpos, (_, i) => easpos[i]),
  normal: Array.from(norpos, (_, i) => norpos[i]), // 101ã€œ115
  hard: Array.from(hadpos, (_, i) => hadpos[i]), // 501ã€œ525
};

 let showtime = 0;
function showHint() {
  const situkoMessage = document.createElement("div");
  const hintMessage = document.createElement("div");
  const aoriMessage = document.createElement("div");
  const aoriMessage2 = document.createElement("div");
  
  showtime += 1;
  if(showtime >= 7){
    situkoMessage.textContent = "ä½•å›æŠ¼ã™ã­ã‚“";
  situkoMessage.style.color = "#0077cc";
  situkoMessage.style.marginTop = "10px";
    message.appendChild(situkoMessage)
  } else if(showtime == 1){
    aoriMessage.textContent = "ã‚ãƒ¼ã€ãƒ’ãƒ³ãƒˆè¦‹ã¡ã‚ƒã†ã‚“ã ï¼Ÿ";
  aoriMessage.style.color = "#0077cc";
  aoriMessage.style.marginTop = "10px";
     message.appendChild(aoriMessage)
  } else if(showtime == 2){
    aoriMessage2.textContent = "ã—ã‚‡ã†ãŒãªã„ãªãã€‚";
  aoriMessage2.style.color = "#0077cc";
  aoriMessage2.style.marginTop = "10px";
     message.appendChild(aoriMessage2)
  } else {
    hintMessage.textContent = "ãƒ’ãƒ³ãƒˆï¼šè£½ä½œè€…ã®è‹—å­—";
  hintMessage.style.color = "#0077cc";
  hintMessage.style.marginTop = "10px";
  message.appendChild(hintMessage);
  }
}
  </script>
  <div class = 'rule'>
    ãƒ«ãƒ¼ãƒ«èª¬æ˜<br>
ã€€ãƒ»ã‚¿ã‚¤ãƒ«ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€ç™½é»’ãŒäº¤äº’ã«å…¥ã‚Œæ›¿ã‚ã‚Šã¾ã™ã€‚<br>
ã€€ãƒ»ã‚¿ã‚¤ãƒ«ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹æ•°å­—ã¯ã€ãã®ã‚¿ã‚¤ãƒ«ã®å‘¨å›²ï¼˜ãƒã‚¹ã®ã‚¿ã‚¤ãƒ«ã®ã†ã¡<br>
ã€€ã€€ã‚¯ãƒªã‚¢ç›¤é¢ã®é»’è‰²ã®ã‚‚ã®ã®æ•°ã‚’è¡¨ã—ã¾ã™ï¼ˆãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã™ã‚‹ã¨ã„ã„ã‹ã‚‚ï¼‰ã€‚<br>
ã€€ãƒ»ã™ã¹ã¦ã®ã‚¿ã‚¤ãƒ«ã®æ¡ä»¶ã«åˆã†ã‚ˆã†ãªç›¤é¢ã«ã§ãã‚Œã°ã‚¯ãƒªã‚¢ã§ã™ã€‚<br>
ã€€ãƒ»ã‚‚ã—ã‹ã—ãŸã‚‰åˆ¥è§£ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€è‡ªåˆ†ã¯ãã‚“ãªã«é ­è‰¯ããªã„ã®ã§<br>
ã€€ã€€æƒ³å®šè§£ã—ã‹æ­£è§£åˆ¤å®šã«ã—ã¦ãŠã‚Šã¾ã›ã‚“ã€‚ã”ã‚ã‚“ãªã•ã„ã€‚<br>
ã€€ãƒ»å…¨3ã‚¹ãƒ†ãƒ¼ã‚¸ï¼é˜ªå¤§ç”Ÿãªã‚‰ã‚¯ãƒªã‚¢ã§ãã‚‹ã‚ˆã­ï¼ï¼Ÿ
ã€€</div>
</body>
</html>
